---
title: "DANL 200: Introduction to Data Analytics<br>Homework Assignment 3"
author: "Byeong-Hak Choe"
---

```{r setup, include = F}
library(tidyverse)
library(skimr)
library(stargazer)
library(broom)
library(scales)  # scales for ggplot
library(ggthemes)  # additional ggplot themes
library(hrbrthemes) # additional ggplot themes and color pallets
library(lubridate)
library(ggridges)
theme_set(theme_minimal()) # setting the minimal theme for ggplot
# setting default chunk options
knitr::opts_chunk$set(
	eval = F,
	echo = T,
	message = FALSE,
	warning = FALSE
)
```

Load R packages you need for Homework Assignment 3

```{r}
library(tidyverse)
library(skimr)
library(stargazer)
library(broom)
```

# Question 1

Load the DataFrfame for Question 1.

```{r}
path <- 'https://bcdanl.github.io/data/beer_markets.csv'
beer_mkts <- read_csv(path)
```

## Variable Description
- `hh`: an identifier of the purchasing household;
- `X_purchase_desc`: details on the purchased item;
- `quantity`: the number of items purchased;
- `brand`: Bud Light, Busch Light, Coors Light, Miller Lite, or Natural Light;
- `spent`: total dollar value of purchase;
- `beer_floz`: total volume of beer, in fluid ounces;
- `price_per_floz`: price per fl.oz. (i.e., beer spent/beer floz);
- `container`: the type of container;
- `promo`: Whether the item was promoted (coupon or otherwise);
- `market`: Scan-track market (or state if rural);
- demographic data, including gender, marital status, household income, class of work, race, education, age, the size of household, and whether or not the household has a microwave or a dishwasher.


## Q1a

In the data.frame, `beer_mkts`, keep the observations with only *'CAN'* or *'NON REFILLABLE BOTTLE'* type `container`s.

```{r}

```

<br><br>

## Q1b

In the data.frame, `beer_mkts`, convert the *character* variable, `market`, to the *factor* variable with the first level *'BUFFALO-ROCHESTER'*.

```{r}

```

<br><br>

## Q1c

- Create the data.frame, `beer_mkts_NY`, that include 
  a. only the following `market`s, 
    1. BUFFALO-ROCHESTER;
    2. ALBANY;
    3. SYRACUSE;
    4. SURBURBAN NY;
    5. EXURBAN NY;
    6. URBAN NY; 
  b. only the following beer `brand`s
    1. BUD LIGHT;
    2. COORS LIGHT;
    3. MILLER LITE.

- Provide both (1) ggplot with `beer_mkts_NY` and (2) a comment to describe how the relationship between `log(price_per_floz)` and `log(beer_floz)` varies by `market` and `brand`. 

```{r}

```

<br><br>

## Q1d

- Randomly divide the data.frame, `beer_mkts`, into training and test data.frames, `dtrain` and `dtest`, respectively.

- Make sure that you can replicate the randomization.
  -  Approximately 60% of observations in `beer_mkts` go to `dtrain.`
  - The rest of observations in `beer_mkts` go to `dtest`.

```{r}

```

<br><br>

## Q1e

Use dtrain to train the linear regression model with the following formula.

```{r}
formula <- 
  log(price_per_floz) ~  
    log(beer_floz) + market + container + brand
```


- Provide the summary of the linear regression.
```{r}

```

<br>

## Q1f

From the result in Q1e, interpret the beta estimates of the following variables.
  1. `marketALBANY`
  2. `marketEXURBAN NY`
  3. `marketRURAL NEW YORK`
  4. `marketSURBURBAN NY`
  5. `marketSYRACUSE`
  6. `marketURBAN NY`
  7. `brandBUSCH LIGHT`

```{r}

```

<br>

## Q1g
From the result in Q1e, interpret the beta estimate for `log(beer_floz)`.

<br>

## Q1h
Make a prediction on the price of one 12 fl.oz bottle of beer using the `dtest` data.frame and the regression result in Q1e.

<br>

## Q1i
Provide both (1) ggplot and (2) a simple comment to describe how the distribution of the predicted price of one 12 fl.oz bottle of beer varies by `brand`.

<br>

## Q1j

- Use ggplot to draw a residual plot.
- Make a simple comment on the residual plot.

<br>
