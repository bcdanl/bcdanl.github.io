<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Byeong-Hak Choe">

<title>B.H. CHOE - Spring 2023, DANL 210: Data Preparation and Management</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">B.H. CHOE</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./cv.html">
 <span class="menu-text">about</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-danl200-lec" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">danl200-lec</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-danl200-lec">    
        <li>
    <a class="dropdown-item" href="./DANL200_Lec01_20230124.html">
 <span class="dropdown-text">lecture 01 - syllabus</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec02_20230126.html">
 <span class="dropdown-text">lecture 02 - r basic</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec03_20230131.html">
 <span class="dropdown-text">lecture 03 - r basic, ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec04_20230202.html">
 <span class="dropdown-text">lecture 04 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec05_20230207.html">
 <span class="dropdown-text">lecture 05 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec06_20230209.html">
 <span class="dropdown-text">lecture 06 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec07_20230214.html">
 <span class="dropdown-text">lecture 07 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec08_20230216.html">
 <span class="dropdown-text">lecture 08 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec09_20230221.html">
 <span class="dropdown-text">lecture 09 - ggplot, visualization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec10_20230223.html">
 <span class="dropdown-text">lecture 10 - visualization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec11_20230302.html">
 <span class="dropdown-text">lecture 11 - visualization, filter</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec12_20230307.html">
 <span class="dropdown-text">lecture 12 - filter, arrange, select</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec13_20230309.html">
 <span class="dropdown-text">lecture 13 - select, mutate</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec14_20230321.html">
 <span class="dropdown-text">lecture 14 - summarize, group operation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_Lec15_20230323.html">
 <span class="dropdown-text">lecture 15 - log transformation, summarize, group operation</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-danl200-lab" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">danl200-lab</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-danl200-lab">    
        <li>
    <a class="dropdown-item" href="./DANL200_hw1q.html">
 <span class="dropdown-text">hw1-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_hw1a.html">
 <span class="dropdown-text">hw1-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_lab1q.html">
 <span class="dropdown-text">lab1-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_lab1a.html">
 <span class="dropdown-text">lab1-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_hw2q.html">
 <span class="dropdown-text">hw2-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_hw2a.html">
 <span class="dropdown-text">hw2-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_lab2q.html">
 <span class="dropdown-text">lab2-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_lab2a.html">
 <span class="dropdown-text">lab2-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_midterm-spring-2022-q.html">
 <span class="dropdown-text">midterm-spring-2022-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_midterm-spring-2022-a.html">
 <span class="dropdown-text">midterm-spring-2022-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_midterm-fall-2022-q.html">
 <span class="dropdown-text">midterm-fall-2022-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_midterm-fall-2022-a.html">
 <span class="dropdown-text">midterm-fall-2022-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_midterm-spring-2023-q.html">
 <span class="dropdown-text">midterm-spring-2023-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL200_midterm-spring-2023-a.html">
 <span class="dropdown-text">midterm-spring-2023-a</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-danl210-lec" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">danl210-lec</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-danl210-lec">    
        <li>
    <a class="dropdown-item" href="./DANL210_Lec01_20230124.html">
 <span class="dropdown-text">lecture 01 - syllabus</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec02_20230126.html">
 <span class="dropdown-text">lecture 02 - python basic</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec03_20230131.html">
 <span class="dropdown-text">lecture 03 - python basic</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec04_20230202.html">
 <span class="dropdown-text">lecture 04 - python basic, pandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec05_20230207.html">
 <span class="dropdown-text">lecture 05 - pandas loc iloc</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec06_20230209.html">
 <span class="dropdown-text">lecture 06 - pandas boolean subsetting</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec07_20230214.html">
 <span class="dropdown-text">lecture 07 - drop, sort, rank, assign, lambda</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec08_20230216.html">
 <span class="dropdown-text">lecture 08 - query, drop, sort, rank, assign, lambda</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec09_20230221.html">
 <span class="dropdown-text">lecture 09 - apply</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec10_20230223.html">
 <span class="dropdown-text">lecture 10 - eda</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec11_20230302.html">
 <span class="dropdown-text">lecture 11 - seaborn</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec12_20230307.html">
 <span class="dropdown-text">lecture 12 - seaborn, agg</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec13_20230309.html">
 <span class="dropdown-text">lecture 13 - agg, transform, filter</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec14_20230321.html">
 <span class="dropdown-text">lecture 14 - agg, transform, filter, tidy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec15_20230323.html">
 <span class="dropdown-text">lecture 15 - tidy, data types</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_Lec16_20230404.html">
 <span class="dropdown-text">lecture 16 - data types, data concatenation</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-danl210-lab" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">danl210-lab</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-danl210-lab">    
        <li>
    <a class="dropdown-item" href="./DANL210_hw1q.html">
 <span class="dropdown-text">hw1-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_hw1a.html">
 <span class="dropdown-text">hw1-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_lab1q_v3.html">
 <span class="dropdown-text">lab1-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_lab1a.html">
 <span class="dropdown-text">lab1-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_lab2q.html">
 <span class="dropdown-text">lab2-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_lab2a.html">
 <span class="dropdown-text">lab2-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_hw2q.html">
 <span class="dropdown-text">hw2-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_hw2a.html">
 <span class="dropdown-text">hw2-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_lab3q.html">
 <span class="dropdown-text">lab3-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_lab3a.html">
 <span class="dropdown-text">lab3-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_midterm-spring-2023-q.html">
 <span class="dropdown-text">midterm-spring-2023-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL210_midterm-spring-2023-a.html">
 <span class="dropdown-text">midterm-spring-2023-a</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-danl310-lec" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">danl310-lec</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-danl310-lec">    
        <li>
    <a class="dropdown-item" href="./DANL310_Lec01_20230124.html">
 <span class="dropdown-text">lecture 01 - syllabus</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec02_20230126.html">
 <span class="dropdown-text">lecture 02 - github website, rmarkdown</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec03_20230131.html">
 <span class="dropdown-text">lecture 03 - rmarkdown</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec04_20230202.html">
 <span class="dropdown-text">lecture 04 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec05_20230207.html">
 <span class="dropdown-text">lecture 05 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec06_20230209.html">
 <span class="dropdown-text">lecture 06 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec07_20230214.html">
 <span class="dropdown-text">lecture 07 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec08_20230216.html">
 <span class="dropdown-text">lecture 08 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec09_20230221.html">
 <span class="dropdown-text">lecture 09 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec10_20230223.html">
 <span class="dropdown-text">lecture 10 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec11_20230302.html">
 <span class="dropdown-text">lecture 11 - ggplot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec12_20230307.html">
 <span class="dropdown-text">lecture 12 - work with model</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec13_20230309.html">
 <span class="dropdown-text">lecture 13 - color, theme</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec14_20230321.html">
 <span class="dropdown-text">lecture 14 - maps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_Lec15_20230323.html">
 <span class="dropdown-text">lecture 15 - maps</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-danl310-lab" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">danl310-lab</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-danl310-lab">    
        <li>
    <a class="dropdown-item" href="./DANL310_hw1q.html">
 <span class="dropdown-text">hw1-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_hw1a.html">
 <span class="dropdown-text">hw1-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_hw2q.html">
 <span class="dropdown-text">hw2-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_lab1q.html">
 <span class="dropdown-text">lab1-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_lab1a.html">
 <span class="dropdown-text">lab1-a</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_lab2q.html">
 <span class="dropdown-text">lab2-q</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./DANL310_lab3q.html">
 <span class="dropdown-text">lab3-q</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ml-lab" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">ml-lab</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-ml-lab">    
        <li>
    <a class="dropdown-item" href="./mba-ch1-lm.html">
 <span class="dropdown-text">linear regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mba-ch1-logit.html">
 <span class="dropdown-text">logistic regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mba-ch3-regularization.html">
 <span class="dropdown-text">regularization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mba-ch3-model-selection.html">
 <span class="dropdown-text">model selection</span></a>
  </li>  
        <li class="dropdown-header">double ml</li>
        <li class="dropdown-header">trees and forests</li>
        <li class="dropdown-header">classification</li>
        <li class="dropdown-header">clustering</li>
        <li class="dropdown-header">principal component analysis</li>
    </ul>
  </li>
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#load-libraries" id="toc-load-libraries" class="nav-link active" data-scroll-target="#load-libraries">Load Libraries</a></li>
  <li><a href="#question-1" id="toc-question-1" class="nav-link" data-scroll-target="#question-1">Question 1</a>
  <ul class="collapse">
  <li><a href="#q1a" id="toc-q1a" class="nav-link" data-scroll-target="#q1a">Q1a</a></li>
  <li><a href="#q1b" id="toc-q1b" class="nav-link" data-scroll-target="#q1b">Q1b</a></li>
  </ul></li>
  <li><a href="#question-2" id="toc-question-2" class="nav-link" data-scroll-target="#question-2">Question 2</a>
  <ul class="collapse">
  <li><a href="#load-dataframe-for-q2a-and-q2b" id="toc-load-dataframe-for-q2a-and-q2b" class="nav-link" data-scroll-target="#load-dataframe-for-q2a-and-q2b">Load DataFrame for Q2a and Q2b</a></li>
  <li><a href="#variable-description" id="toc-variable-description" class="nav-link" data-scroll-target="#variable-description">Variable Description</a></li>
  <li><a href="#q2a." id="toc-q2a." class="nav-link" data-scroll-target="#q2a.">Q2a.</a></li>
  <li><a href="#q2b." id="toc-q2b." class="nav-link" data-scroll-target="#q2b.">Q2b.</a></li>
  <li><a href="#q2c." id="toc-q2c." class="nav-link" data-scroll-target="#q2c.">Q2c.</a></li>
  <li><a href="#q2d." id="toc-q2d." class="nav-link" data-scroll-target="#q2d.">Q2d.</a></li>
  <li><a href="#q2e." id="toc-q2e." class="nav-link" data-scroll-target="#q2e.">Q2e.</a></li>
  <li><a href="#q2f." id="toc-q2f." class="nav-link" data-scroll-target="#q2f.">Q2f.</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Spring 2023, DANL 210: Data Preparation and Management</h1>
<p class="subtitle lead">Midterm Exam</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Byeong-Hak Choe </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="load-libraries" class="level2">
<h2 class="anchored" data-anchor-id="load-libraries">Load Libraries</h2>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="question-1" class="level1">
<h1>Question 1</h1>
<p>Load the DataFrame for Question 1.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>nyc_pop <span class="op">=</span> pd.read_csv(<span class="st">'https://bcdanl.github.io/data/nyc_pop_by_boro_1950-2040.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="cell-output cell-output-display" data-execution_count="3">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Borough</th>
      <th>1950</th>
      <th>1960</th>
      <th>1970</th>
      <th>1980</th>
      <th>1990</th>
      <th>2000</th>
      <th>2010</th>
      <th>2020</th>
      <th>2030</th>
      <th>2040</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bronx</td>
      <td>1451277.0</td>
      <td>1424815.0</td>
      <td>1471701.0</td>
      <td>1168972.0</td>
      <td>1203789.0</td>
      <td>1332650.0</td>
      <td>1385108.0</td>
      <td>1446788.0</td>
      <td>1518998.0</td>
      <td>1579245.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Brooklyn</td>
      <td>2738175.0</td>
      <td>2627319.0</td>
      <td>2602012.0</td>
      <td>2230936.0</td>
      <td>2300664.0</td>
      <td>2465326.0</td>
      <td>2552911.0</td>
      <td>2648452.0</td>
      <td>2754009.0</td>
      <td>2840525.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Manhattan</td>
      <td>1960101.0</td>
      <td>1698281.0</td>
      <td>1539233.0</td>
      <td>1428285.0</td>
      <td>1487536.0</td>
      <td>1537195.0</td>
      <td>1585873.0</td>
      <td>1638281.0</td>
      <td>1676720.0</td>
      <td>1691617.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Queens</td>
      <td>1550849.0</td>
      <td>1809578.0</td>
      <td>1986473.0</td>
      <td>1891325.0</td>
      <td>1951598.0</td>
      <td>2229379.0</td>
      <td>2250002.0</td>
      <td>2330295.0</td>
      <td>2373551.0</td>
      <td>2412649.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Staten Island</td>
      <td>191555.0</td>
      <td>221991.0</td>
      <td>295443.0</td>
      <td>352121.0</td>
      <td>378977.0</td>
      <td>443728.0</td>
      <td>468730.0</td>
      <td>487155.0</td>
      <td>497749.0</td>
      <td>501109.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p><br></p>
<section id="q1a" class="level2">
<h2 class="anchored" data-anchor-id="q1a">Q1a</h2>
<p>Provide both pandas/seaborn code and a simple comment to describe the trend of population for each borough.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>nyc_pop.columns</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>nyc_pop_long <span class="op">=</span> nyc_pop.melt(id_vars <span class="op">=</span> <span class="st">'Borough'</span>, var_name <span class="op">=</span> <span class="st">'Year'</span>, value_name <span class="op">=</span> <span class="st">'Pop'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="5">
<div class="cell-output cell-output-display">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Borough</th>
      <th>Year</th>
      <th>Pop</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bronx</td>
      <td>1950</td>
      <td>1451277.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Brooklyn</td>
      <td>1950</td>
      <td>2738175.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Manhattan</td>
      <td>1950</td>
      <td>1960101.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Queens</td>
      <td>1950</td>
      <td>1550849.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Staten Island</td>
      <td>1950</td>
      <td>191555.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Bronx</td>
      <td>1960</td>
      <td>1424815.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Brooklyn</td>
      <td>1960</td>
      <td>2627319.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Manhattan</td>
      <td>1960</td>
      <td>1698281.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Queens</td>
      <td>1960</td>
      <td>1809578.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Staten Island</td>
      <td>1960</td>
      <td>221991.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Bronx</td>
      <td>1970</td>
      <td>1471701.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Brooklyn</td>
      <td>1970</td>
      <td>2602012.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Manhattan</td>
      <td>1970</td>
      <td>1539233.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Queens</td>
      <td>1970</td>
      <td>1986473.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Staten Island</td>
      <td>1970</td>
      <td>295443.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Bronx</td>
      <td>1980</td>
      <td>1168972.0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Brooklyn</td>
      <td>1980</td>
      <td>2230936.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Manhattan</td>
      <td>1980</td>
      <td>1428285.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Queens</td>
      <td>1980</td>
      <td>1891325.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Staten Island</td>
      <td>1980</td>
      <td>352121.0</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Bronx</td>
      <td>1990</td>
      <td>1203789.0</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Brooklyn</td>
      <td>1990</td>
      <td>2300664.0</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Manhattan</td>
      <td>1990</td>
      <td>1487536.0</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Queens</td>
      <td>1990</td>
      <td>1951598.0</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Staten Island</td>
      <td>1990</td>
      <td>378977.0</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Bronx</td>
      <td>2000</td>
      <td>1332650.0</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Brooklyn</td>
      <td>2000</td>
      <td>2465326.0</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Manhattan</td>
      <td>2000</td>
      <td>1537195.0</td>
    </tr>
    <tr>
      <th>28</th>
      <td>Queens</td>
      <td>2000</td>
      <td>2229379.0</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Staten Island</td>
      <td>2000</td>
      <td>443728.0</td>
    </tr>
    <tr>
      <th>30</th>
      <td>Bronx</td>
      <td>2010</td>
      <td>1385108.0</td>
    </tr>
    <tr>
      <th>31</th>
      <td>Brooklyn</td>
      <td>2010</td>
      <td>2552911.0</td>
    </tr>
    <tr>
      <th>32</th>
      <td>Manhattan</td>
      <td>2010</td>
      <td>1585873.0</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Queens</td>
      <td>2010</td>
      <td>2250002.0</td>
    </tr>
    <tr>
      <th>34</th>
      <td>Staten Island</td>
      <td>2010</td>
      <td>468730.0</td>
    </tr>
    <tr>
      <th>35</th>
      <td>Bronx</td>
      <td>2020</td>
      <td>1446788.0</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Brooklyn</td>
      <td>2020</td>
      <td>2648452.0</td>
    </tr>
    <tr>
      <th>37</th>
      <td>Manhattan</td>
      <td>2020</td>
      <td>1638281.0</td>
    </tr>
    <tr>
      <th>38</th>
      <td>Queens</td>
      <td>2020</td>
      <td>2330295.0</td>
    </tr>
    <tr>
      <th>39</th>
      <td>Staten Island</td>
      <td>2020</td>
      <td>487155.0</td>
    </tr>
    <tr>
      <th>40</th>
      <td>Bronx</td>
      <td>2030</td>
      <td>1518998.0</td>
    </tr>
    <tr>
      <th>41</th>
      <td>Brooklyn</td>
      <td>2030</td>
      <td>2754009.0</td>
    </tr>
    <tr>
      <th>42</th>
      <td>Manhattan</td>
      <td>2030</td>
      <td>1676720.0</td>
    </tr>
    <tr>
      <th>43</th>
      <td>Queens</td>
      <td>2030</td>
      <td>2373551.0</td>
    </tr>
    <tr>
      <th>44</th>
      <td>Staten Island</td>
      <td>2030</td>
      <td>497749.0</td>
    </tr>
    <tr>
      <th>45</th>
      <td>Bronx</td>
      <td>2040</td>
      <td>1579245.0</td>
    </tr>
    <tr>
      <th>46</th>
      <td>Brooklyn</td>
      <td>2040</td>
      <td>2840525.0</td>
    </tr>
    <tr>
      <th>47</th>
      <td>Manhattan</td>
      <td>2040</td>
      <td>1691617.0</td>
    </tr>
    <tr>
      <th>48</th>
      <td>Queens</td>
      <td>2040</td>
      <td>2412649.0</td>
    </tr>
    <tr>
      <th>49</th>
      <td>Staten Island</td>
      <td>2040</td>
      <td>501109.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>sns.lineplot(nyc_pop_long,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>             x <span class="op">=</span> <span class="st">'Year'</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>             y <span class="op">=</span> <span class="st">'Pop'</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>             hue <span class="op">=</span> <span class="st">'Borough'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>&lt;AxesSubplot:xlabel='Year', ylabel='Pop'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="DANL210_midterm-spring-2023-a_files/figure-html/cell-7-output-2.png" width="589" height="443"></p>
</div>
</div>
<p><br></p>
</section>
<section id="q1b" class="level2">
<h2 class="anchored" data-anchor-id="q1b">Q1b</h2>
<p>Provide both pandas/seaborn code and a simple comment to describe the trend of the proportion of population for each borough.</p>
<ul>
<li>Note: The proportion of population for each borough is each boroughâ€™s share of total population in NYC in each year.</li>
</ul>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>q1b <span class="op">=</span> (</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>       nyc_pop_long</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>       .assign(tot <span class="op">=</span> <span class="kw">lambda</span> x: x.groupby(<span class="st">'Year'</span>)[<span class="st">'Pop'</span>].transform(<span class="st">'sum'</span>),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>               prop <span class="op">=</span> <span class="kw">lambda</span> x: <span class="dv">100</span> <span class="op">*</span> x[<span class="st">'Pop'</span>] <span class="op">/</span> x[<span class="st">'tot'</span>],</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>               chk <span class="op">=</span> <span class="kw">lambda</span> x: x.groupby(<span class="st">'Year'</span>)[<span class="st">'prop'</span>].transform(<span class="st">'sum'</span>) )</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>       )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Borough</th>
      <th>Year</th>
      <th>Pop</th>
      <th>tot</th>
      <th>prop</th>
      <th>chk</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bronx</td>
      <td>1950</td>
      <td>1451277.0</td>
      <td>7891957.0</td>
      <td>18.389317</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Brooklyn</td>
      <td>1950</td>
      <td>2738175.0</td>
      <td>7891957.0</td>
      <td>34.695767</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Manhattan</td>
      <td>1950</td>
      <td>1960101.0</td>
      <td>7891957.0</td>
      <td>24.836691</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Queens</td>
      <td>1950</td>
      <td>1550849.0</td>
      <td>7891957.0</td>
      <td>19.651007</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Staten Island</td>
      <td>1950</td>
      <td>191555.0</td>
      <td>7891957.0</td>
      <td>2.427218</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Bronx</td>
      <td>1960</td>
      <td>1424815.0</td>
      <td>7781984.0</td>
      <td>18.309148</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Brooklyn</td>
      <td>1960</td>
      <td>2627319.0</td>
      <td>7781984.0</td>
      <td>33.761557</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Manhattan</td>
      <td>1960</td>
      <td>1698281.0</td>
      <td>7781984.0</td>
      <td>21.823239</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Queens</td>
      <td>1960</td>
      <td>1809578.0</td>
      <td>7781984.0</td>
      <td>23.253427</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Staten Island</td>
      <td>1960</td>
      <td>221991.0</td>
      <td>7781984.0</td>
      <td>2.852627</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Bronx</td>
      <td>1970</td>
      <td>1471701.0</td>
      <td>7894862.0</td>
      <td>18.641250</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Brooklyn</td>
      <td>1970</td>
      <td>2602012.0</td>
      <td>7894862.0</td>
      <td>32.958296</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Manhattan</td>
      <td>1970</td>
      <td>1539233.0</td>
      <td>7894862.0</td>
      <td>19.496642</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Queens</td>
      <td>1970</td>
      <td>1986473.0</td>
      <td>7894862.0</td>
      <td>25.161592</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Staten Island</td>
      <td>1970</td>
      <td>295443.0</td>
      <td>7894862.0</td>
      <td>3.742219</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Bronx</td>
      <td>1980</td>
      <td>1168972.0</td>
      <td>7071639.0</td>
      <td>16.530425</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Brooklyn</td>
      <td>1980</td>
      <td>2230936.0</td>
      <td>7071639.0</td>
      <td>31.547651</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Manhattan</td>
      <td>1980</td>
      <td>1428285.0</td>
      <td>7071639.0</td>
      <td>20.197369</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Queens</td>
      <td>1980</td>
      <td>1891325.0</td>
      <td>7071639.0</td>
      <td>26.745214</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Staten Island</td>
      <td>1980</td>
      <td>352121.0</td>
      <td>7071639.0</td>
      <td>4.979341</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Bronx</td>
      <td>1990</td>
      <td>1203789.0</td>
      <td>7322564.0</td>
      <td>16.439447</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Brooklyn</td>
      <td>1990</td>
      <td>2300664.0</td>
      <td>7322564.0</td>
      <td>31.418831</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Manhattan</td>
      <td>1990</td>
      <td>1487536.0</td>
      <td>7322564.0</td>
      <td>20.314414</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Queens</td>
      <td>1990</td>
      <td>1951598.0</td>
      <td>7322564.0</td>
      <td>26.651839</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Staten Island</td>
      <td>1990</td>
      <td>378977.0</td>
      <td>7322564.0</td>
      <td>5.175469</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Bronx</td>
      <td>2000</td>
      <td>1332650.0</td>
      <td>8008278.0</td>
      <td>16.640906</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Brooklyn</td>
      <td>2000</td>
      <td>2465326.0</td>
      <td>8008278.0</td>
      <td>30.784721</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Manhattan</td>
      <td>2000</td>
      <td>1537195.0</td>
      <td>8008278.0</td>
      <td>19.195075</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>28</th>
      <td>Queens</td>
      <td>2000</td>
      <td>2229379.0</td>
      <td>8008278.0</td>
      <td>27.838432</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Staten Island</td>
      <td>2000</td>
      <td>443728.0</td>
      <td>8008278.0</td>
      <td>5.540867</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>30</th>
      <td>Bronx</td>
      <td>2010</td>
      <td>1385108.0</td>
      <td>8242624.0</td>
      <td>16.804212</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>31</th>
      <td>Brooklyn</td>
      <td>2010</td>
      <td>2552911.0</td>
      <td>8242624.0</td>
      <td>30.972067</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>32</th>
      <td>Manhattan</td>
      <td>2010</td>
      <td>1585873.0</td>
      <td>8242624.0</td>
      <td>19.239905</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Queens</td>
      <td>2010</td>
      <td>2250002.0</td>
      <td>8242624.0</td>
      <td>27.297157</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>34</th>
      <td>Staten Island</td>
      <td>2010</td>
      <td>468730.0</td>
      <td>8242624.0</td>
      <td>5.686660</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>35</th>
      <td>Bronx</td>
      <td>2020</td>
      <td>1446788.0</td>
      <td>8550971.0</td>
      <td>16.919576</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Brooklyn</td>
      <td>2020</td>
      <td>2648452.0</td>
      <td>8550971.0</td>
      <td>30.972529</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>37</th>
      <td>Manhattan</td>
      <td>2020</td>
      <td>1638281.0</td>
      <td>8550971.0</td>
      <td>19.159005</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>38</th>
      <td>Queens</td>
      <td>2020</td>
      <td>2330295.0</td>
      <td>8550971.0</td>
      <td>27.251817</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>39</th>
      <td>Staten Island</td>
      <td>2020</td>
      <td>487155.0</td>
      <td>8550971.0</td>
      <td>5.697072</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>40</th>
      <td>Bronx</td>
      <td>2030</td>
      <td>1518998.0</td>
      <td>8821027.0</td>
      <td>17.220194</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>41</th>
      <td>Brooklyn</td>
      <td>2030</td>
      <td>2754009.0</td>
      <td>8821027.0</td>
      <td>31.220956</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>42</th>
      <td>Manhattan</td>
      <td>2030</td>
      <td>1676720.0</td>
      <td>8821027.0</td>
      <td>19.008218</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>43</th>
      <td>Queens</td>
      <td>2030</td>
      <td>2373551.0</td>
      <td>8821027.0</td>
      <td>26.907876</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>44</th>
      <td>Staten Island</td>
      <td>2030</td>
      <td>497749.0</td>
      <td>8821027.0</td>
      <td>5.642756</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>45</th>
      <td>Bronx</td>
      <td>2040</td>
      <td>1579245.0</td>
      <td>9025145.0</td>
      <td>17.498278</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>46</th>
      <td>Brooklyn</td>
      <td>2040</td>
      <td>2840525.0</td>
      <td>9025145.0</td>
      <td>31.473456</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>47</th>
      <td>Manhattan</td>
      <td>2040</td>
      <td>1691617.0</td>
      <td>9025145.0</td>
      <td>18.743378</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>48</th>
      <td>Queens</td>
      <td>2040</td>
      <td>2412649.0</td>
      <td>9025145.0</td>
      <td>26.732523</td>
      <td>100.0</td>
    </tr>
    <tr>
      <th>49</th>
      <td>Staten Island</td>
      <td>2040</td>
      <td>501109.0</td>
      <td>9025145.0</td>
      <td>5.552365</td>
      <td>100.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>sns.lineplot(q1b,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>             x <span class="op">=</span> <span class="st">'Year'</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>             y <span class="op">=</span> <span class="st">'prop'</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>             hue <span class="op">=</span> <span class="st">'Borough'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>&lt;AxesSubplot:xlabel='Year', ylabel='prop'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="DANL210_midterm-spring-2023-a_files/figure-html/cell-10-output-2.png" width="585" height="429"></p>
</div>
</div>
<p><br><br></p>
</section>
</section>
<section id="question-2" class="level1">
<h1>Question 2</h1>
<section id="load-dataframe-for-q2a-and-q2b" class="level2">
<h2 class="anchored" data-anchor-id="load-dataframe-for-q2a-and-q2b">Load DataFrame for Q2a and Q2b</h2>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>restaurant <span class="op">=</span> pd.read_csv(<span class="st">'https://bcdanl.github.io/data/DOHMH_NYC_Restaurant_Inspection.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="11">
<div class="cell-output cell-output-display" data-execution_count="11">

<table class="dataframe table table-sm table-striped">

<thead>

<tr>

<th>
</th>

<th>
CAMIS
</th>

<th>
DBA
</th>

<th>
BORO
</th>

<th>
STREET
</th>

<th>
CUISINE DESCRIPTION
</th>

<th>
INSPECTION DATE
</th>

<th>
ACTION
</th>

<th>
VIOLATION CODE
</th>

<th>
VIOLATION DESCRIPTION
</th>

<th>
CRITICAL FLAG
</th>

<th>
SCORE
</th>

<th>
GRADE
</th>

</tr>

</thead>

<tbody>

<tr>

<th>
0
</th>

<td>
30191841
</td>

<td>
dj reynolds pub and restaurant
</td>

<td>
Manhattan
</td>

<td>
WEST 57 STREET
</td>

<td>
Irish
</td>

<td>
01/04/2022
</td>

<td>
Violations were cited in the following area(s).
</td>

<td>
10F
</td>

<td>
Non-food contact surface improperly constructed. Unacceptable material used. Non-food contact surface or equipment improperly maintained and/or not properly sealed, raised, spaced or movable to allow accessibility for cleaning on all sides, above and underneath the unit.
</td>

<td>
Not Critical
</td>

<td>
12
</td>

<td>
A
</td>

</tr>

<tr>

<th>
1
</th>

<td>
40356018
</td>

<td>
riviera caterers
</td>

<td>
Brooklyn
</td>

<td>
STILLWELL AVENUE
</td>

<td>
American
</td>

<td>
02/01/2022
</td>

<td>
Violations were cited in the following area(s).
</td>

<td>
02G
</td>

<td>
Cold food item held above 41Âº F (smoked fish and reduced oxygen packaged foods above 38 ÂºF) except during necessary preparation.
</td>

<td>
Critical
</td>

<td>
7
</td>

<td>
A
</td>

</tr>

<tr>

<th>
2
</th>

<td>
40356483
</td>

<td>
wilken's fine food
</td>

<td>
Brooklyn
</td>

<td>
AVENUE U
</td>

<td>
Sandwiches
</td>

<td>
08/19/2022
</td>

<td>
Violations were cited in the following area(s).
</td>

<td>
10F
</td>

<td>
Non-food contact surface or equipment made of unacceptable material, not kept clean, or not properly sealed, raised, spaced or movable to allow accessibility for cleaning on all sides, above and underneath the unit.
</td>

<td>
Not Critical
</td>

<td>
2
</td>

<td>
A
</td>

</tr>

<tr>

<th>
3
</th>

<td>
40356731
</td>

<td>
taste the tropics ice cream
</td>

<td>
Brooklyn
</td>

<td>
NOSTRAND AVENUE
</td>

<td>
Frozen Desserts
</td>

<td>
01/17/2023
</td>

<td>
Violations were cited in the following area(s).
</td>

<td>
08A
</td>

<td>
Establishment is not free of harborage or conditions conducive to rodents, insects or other pests.
</td>

<td>
Not Critical
</td>

<td>
9
</td>

<td>
A
</td>

</tr>

<tr>

<th>
4
</th>

<td>
40357217
</td>

<td>
wild asia
</td>

<td>
Bronx
</td>

<td>
SOUTHERN BOULEVARD
</td>

<td>
American
</td>

<td>
07/28/2021
</td>

<td>
Violations were cited in the following area(s).
</td>

<td>
02G
</td>

<td>
Cold food item held above 41Âº F (smoked fish and reduced oxygen packaged foods above 38 ÂºF) except during necessary preparation.
</td>

<td>
Critical
</td>

<td>
10
</td>

<td>
A
</td>

</tr>

<tr>

<th>
â€¦
</th>

<td>
â€¦
</td>

<td>
â€¦
</td>

<td>
â€¦
</td>

<td>
â€¦
</td>

<td>
â€¦
</td>

<td>
â€¦
</td>

<td>
â€¦
</td>

<td>
â€¦
</td>

<td>
â€¦
</td>

<td>
â€¦
</td>

<td>
â€¦
</td>

<td>
â€¦
</td>

</tr>

<tr>

<th>
17628
</th>

<td>
50133218
</td>

<td>
sades southern cafe llc
</td>

<td>
Bronx
</td>

<td>
EAST 233 STREET
</td>

<td>
Caribbean
</td>

<td>
03/06/2023
</td>

<td>
Violations were cited in the following area(s).
</td>

<td>
06A
</td>

<td>
Personal cleanliness is inadequate. Outer garment soiled with possible contaminant. Effective hair restraint not worn where required. Jewelry worn on hands or arms. Fingernail polish worn or fingernails not kept clean and trimmed.
</td>

<td>
Critical
</td>

<td>
12
</td>

<td>
A
</td>

</tr>

<tr>

<th>
17629
</th>

<td>
50133250
</td>

<td>
red brick
</td>

<td>
Brooklyn
</td>

<td>
NOSTRAND AVENUE
</td>

<td>
Caribbean
</td>

<td>
03/22/2023
</td>

<td>
Violations were cited in the following area(s).
</td>

<td>
08A
</td>

<td>
Establishment is not free of harborage or conditions conducive to rodents, insects or other pests.
</td>

<td>
Not Critical
</td>

<td>
4
</td>

<td>
A
</td>

</tr>

<tr>

<th>
17630
</th>

<td>
50133302
</td>

<td>
potbelly
</td>

<td>
Manhattan
</td>

<td>
EAST 17 STREET
</td>

<td>
Sandwiches
</td>

<td>
03/20/2023
</td>

<td>
Violations were cited in the following area(s).
</td>

<td>
06D
</td>

<td>
Food contact surface not properly washed, rinsed and sanitized after each use and following any activity when contamination may have occurred.
</td>

<td>
Critical
</td>

<td>
7
</td>

<td>
A
</td>

</tr>

<tr>

<th>
17631
</th>

<td>
50133309
</td>

<td>
potbelly
</td>

<td>
Manhattan
</td>

<td>
BROADWAY
</td>

<td>
Soups/Salads/Sandwiches
</td>

<td>
03/27/2023
</td>

<td>
Violations were cited in the following area(s).
</td>

<td>
10F
</td>

<td>
Non-food contact surface or equipment made of unacceptable material, not kept clean, or not properly sealed, raised, spaced or movable to allow accessibility for cleaning on all sides, above and underneath the unit.
</td>

<td>
Not Critical
</td>

<td>
4
</td>

<td>
A
</td>

</tr>

<tr>

<th>
17632
</th>

<td>
50133690
</td>

<td>
island shack
</td>

<td>
Brooklyn
</td>

<td>
FRANKLIN AVENUE
</td>

<td>
Caribbean
</td>

<td>
03/23/2023
</td>

<td>
Violations were cited in the following area(s).
</td>

<td>
10F
</td>

<td>
Non-food contact surface or equipment made of unacceptable material, not kept clean, or not properly sealed, raised, spaced or movable to allow accessibility for cleaning on all sides, above and underneath the unit.
</td>

<td>
Not Critical
</td>

<td>
12
</td>

<td>
A
</td>

</tr>

</tbody>


</table>
</div>
</div>
</section>
<section id="variable-description" class="level2">
<h2 class="anchored" data-anchor-id="variable-description">Variable Description</h2>
<ul>
<li><code>CAMIS</code>:
<ul>
<li>This is an unique identifier for the entity (restaurant);</li>
<li>10-digit integer</li>
</ul></li>
<li><code>DBA</code>:
<ul>
<li>This field represents the name (doing business as) of the entity (restaurant);</li>
<li>Public business name, may change at discretion of restaurant owner</li>
</ul></li>
<li><code>BORO</code>:
<ul>
<li>Borough in which the entity (restaurant) is located.;</li>
<li>â€¢ <code>1</code> = MANHATTAN</li>
<li>â€¢ <code>2</code> = BRONX</li>
<li>â€¢ <code>3</code> = BROOKLYN</li>
<li>â€¢ <code>4</code> = QUEENS</li>
<li>â€¢ <code>5</code> = STATEN ISLAND</li>
<li>â€¢ <code>0</code> = Missing;</li>
</ul></li>
<li><code>CUISINE DESCRIPTION</code>:
<ul>
<li>This field describes the entity (restaurant) cuisine.</li>
</ul></li>
<li><code>ACTION</code>:
<ul>
<li>This field represents the actions that is associated with each restaurant inspection. ;</li>
<li>â€¢ Violations were cited in the following area(s).</li>
<li>â€¢ No violations were recorded at the time of this inspection.</li>
<li>â€¢ Establishment re-opened by DOHMH</li>
<li>â€¢ Establishment re-closed by DOHMH</li>
<li>â€¢ Establishment Closed by DOHMH.</li>
<li>â€¢ Violations were cited in the following area(s) and those requiring immediate action were addressed.</li>
</ul></li>
<li><code>VIOLATION CODE</code>:
<ul>
<li>Violation code associated with an establishment (restaurant) inspection</li>
</ul></li>
<li><code>VIOLATION DESCRIPTION</code>:
<ul>
<li>Violation description associated with an establishment (restaurant) inspection</li>
</ul></li>
<li><code>CRITICAL FLAG</code>:
<ul>
<li>Indicator of critical violation;</li>
<li>â€¢ <code>Critical</code></li>
<li>â€¢ <code>Not Critical</code></li>
<li>â€¢ <code>Not Applicable</code>;</li>
<li>Critical violations are those most likely to contribute to food-borne illness</li>
</ul></li>
<li><code>SCORE</code>:
<ul>
<li>Total score for a particular inspection;</li>
</ul></li>
<li><code>GRADE</code>:
<ul>
<li>Grade associated with the inspection;</li>
<li>â€¢ <code>N</code> = Not Yet Graded</li>
<li>â€¢ <code>A</code> = Grade A</li>
<li>â€¢ <code>B</code> = Grade B</li>
<li>â€¢ <code>C</code> = Grade C</li>
<li>â€¢ <code>Z</code> = Grade Pending</li>
<li>â€¢ <code>P</code> = Grade Pending issued on re-opening following an initial inspection that resulted in a closure</li>
</ul></li>
</ul>
<p><br></p>
</section>
<section id="q2a." class="level2">
<h2 class="anchored" data-anchor-id="q2a.">Q2a.</h2>
<p>What are the mean, standard deviation, first quartile, median, third quartile, and maximum of <code>SCORE</code> for each <code>GRADE</code> of restaurants?</p>
<p><br></p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>q2a <span class="op">=</span> restaurant.groupby(<span class="st">'GRADE'</span>)[<span class="st">'SCORE'</span>].describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="13">
<div class="cell-output cell-output-display">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>GRADE</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>A</th>
      <td>16305.0</td>
      <td>9.261515</td>
      <td>3.415952</td>
      <td>0.0</td>
      <td>7.0</td>
      <td>10.0</td>
      <td>12.0</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>B</th>
      <td>1034.0</td>
      <td>21.027079</td>
      <td>4.156573</td>
      <td>0.0</td>
      <td>18.0</td>
      <td>21.0</td>
      <td>24.0</td>
      <td>36.0</td>
    </tr>
    <tr>
      <th>C</th>
      <td>294.0</td>
      <td>38.561224</td>
      <td>10.834844</td>
      <td>0.0</td>
      <td>31.0</td>
      <td>36.0</td>
      <td>44.0</td>
      <td>86.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="q2b." class="level2">
<h2 class="anchored" data-anchor-id="q2b.">Q2b.</h2>
<p>Provide both (1) pandas/seaborn code and (2) a simple comment to describe how the distribution of <code>SCORE</code> varies by <code>CRITICAL FLAG</code> when <code>GRADE</code> is <code>A</code>.</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>sns.displot(data <span class="op">=</span> restaurant.query(<span class="st">'GRADE == "A"'</span>), x<span class="op">=</span><span class="st">'SCORE'</span>, kind<span class="op">=</span><span class="st">'kde'</span>, row<span class="op">=</span><span class="st">'CRITICAL FLAG'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7fe578a16430&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="DANL210_midterm-spring-2023-a_files/figure-html/cell-15-output-2.png" width="469" height="947"></p>
</div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>sns.displot(data <span class="op">=</span> restaurant.query(<span class="st">'GRADE == "A"'</span>), x<span class="op">=</span><span class="st">'SCORE'</span>, row<span class="op">=</span><span class="st">'CRITICAL FLAG'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7fe579aa6df0&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="DANL210_midterm-spring-2023-a_files/figure-html/cell-16-output-2.png" width="469" height="947"></p>
</div>
</div>
<ul>
<li>For <code>Not Critical</code> type, the two <code>SCORE</code> values around 1 and 12 are most common, while 12 is the single most common <code>SCORE</code> value for <code>Critical</code> type.</li>
</ul>
<p><br></p>
</section>
<section id="q2c." class="level2">
<h2 class="anchored" data-anchor-id="q2c.">Q2c.</h2>
<ul>
<li>For each pair of <code>BORO</code> and <code>GRADE</code>, calculate
<ul>
<li><ol type="1">
<li>the proportion of <code>Critical</code> violation and</li>
</ol></li>
<li><ol start="2" type="1">
<li>the proportion of <code>Not Critical</code> violation.</li>
</ol></li>
</ul></li>
<li>Make a simple comment on how the proportions vary by <code>BORO</code> and <code>GRADE</code>.</li>
</ul>
<p><br></p>
<ul>
<li><code>.assign()</code> with <code>.transform()</code></li>
</ul>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>q2c_ <span class="op">=</span> (</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>        restaurant</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        .groupby([<span class="st">'BORO'</span>, <span class="st">'GRADE'</span>, <span class="st">'CRITICAL FLAG'</span>])</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        .size()</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        .reset_index(name<span class="op">=</span><span class="st">'n'</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        .assign(tot <span class="op">=</span> <span class="kw">lambda</span> x: x.groupby([<span class="st">'BORO'</span>, <span class="st">'GRADE'</span>])[<span class="st">'n'</span>].transform(<span class="st">'sum'</span>),</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                prop <span class="op">=</span> <span class="kw">lambda</span> x: <span class="dv">100</span> <span class="op">*</span> x[<span class="st">'n'</span>] <span class="op">/</span> x[<span class="st">'tot'</span>])</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>.apply()</code> with <code>.assign()</code></li>
</ul>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>q2c <span class="op">=</span> (</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>       restaurant</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>       .groupby([<span class="st">'BORO'</span>, <span class="st">'GRADE'</span>, <span class="st">'CRITICAL FLAG'</span>])</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>       .size()</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>       .reset_index(name<span class="op">=</span><span class="st">'n'</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>       .groupby([<span class="st">'BORO'</span>, <span class="st">'GRADE'</span>])</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>       .<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.assign( prop <span class="op">=</span> <span class="dv">100</span> <span class="op">*</span> x[<span class="st">'n'</span>] <span class="op">/</span> x[<span class="st">'n'</span>].<span class="bu">sum</span>() ) )</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>       )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>value_counts(normalize = True)</code> can be useful:</li>
</ul>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>q2c__ <span class="op">=</span> (</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  restaurant</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  .groupby([<span class="st">'BORO'</span>, <span class="st">'GRADE'</span>])[<span class="st">'CRITICAL FLAG'</span>]</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  .value_counts(normalize <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="19">
<div class="cell-output cell-output-display">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>BORO</th>
      <th>GRADE</th>
      <th>CRITICAL FLAG</th>
      <th>n</th>
      <th>prop</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bronx</td>
      <td>A</td>
      <td>Critical</td>
      <td>637</td>
      <td>48.404255</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Bronx</td>
      <td>A</td>
      <td>Not Critical</td>
      <td>679</td>
      <td>51.595745</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Bronx</td>
      <td>B</td>
      <td>Critical</td>
      <td>73</td>
      <td>66.972477</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Bronx</td>
      <td>B</td>
      <td>Not Critical</td>
      <td>36</td>
      <td>33.027523</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Bronx</td>
      <td>C</td>
      <td>Critical</td>
      <td>22</td>
      <td>88.000000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Bronx</td>
      <td>C</td>
      <td>Not Critical</td>
      <td>3</td>
      <td>12.000000</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Brooklyn</td>
      <td>A</td>
      <td>Critical</td>
      <td>2082</td>
      <td>49.313122</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Brooklyn</td>
      <td>A</td>
      <td>Not Critical</td>
      <td>2140</td>
      <td>50.686878</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Brooklyn</td>
      <td>B</td>
      <td>Critical</td>
      <td>197</td>
      <td>67.006803</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Brooklyn</td>
      <td>B</td>
      <td>Not Critical</td>
      <td>97</td>
      <td>32.993197</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Brooklyn</td>
      <td>C</td>
      <td>Critical</td>
      <td>54</td>
      <td>64.285714</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Brooklyn</td>
      <td>C</td>
      <td>Not Critical</td>
      <td>30</td>
      <td>35.714286</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Manhattan</td>
      <td>A</td>
      <td>Critical</td>
      <td>3174</td>
      <td>49.733626</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Manhattan</td>
      <td>A</td>
      <td>Not Critical</td>
      <td>3208</td>
      <td>50.266374</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Manhattan</td>
      <td>B</td>
      <td>Critical</td>
      <td>226</td>
      <td>64.942529</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Manhattan</td>
      <td>B</td>
      <td>Not Critical</td>
      <td>122</td>
      <td>35.057471</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Manhattan</td>
      <td>C</td>
      <td>Critical</td>
      <td>64</td>
      <td>65.979381</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Manhattan</td>
      <td>C</td>
      <td>Not Critical</td>
      <td>33</td>
      <td>34.020619</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Queens</td>
      <td>A</td>
      <td>Critical</td>
      <td>1800</td>
      <td>48.128342</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Queens</td>
      <td>A</td>
      <td>Not Critical</td>
      <td>1940</td>
      <td>51.871658</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Queens</td>
      <td>B</td>
      <td>Critical</td>
      <td>147</td>
      <td>60.743802</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Queens</td>
      <td>B</td>
      <td>Not Critical</td>
      <td>95</td>
      <td>39.256198</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Queens</td>
      <td>C</td>
      <td>Critical</td>
      <td>54</td>
      <td>65.060241</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Queens</td>
      <td>C</td>
      <td>Not Critical</td>
      <td>29</td>
      <td>34.939759</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Staten Island</td>
      <td>A</td>
      <td>Critical</td>
      <td>299</td>
      <td>46.356589</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Staten Island</td>
      <td>A</td>
      <td>Not Critical</td>
      <td>346</td>
      <td>53.643411</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Staten Island</td>
      <td>B</td>
      <td>Critical</td>
      <td>31</td>
      <td>75.609756</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Staten Island</td>
      <td>B</td>
      <td>Not Critical</td>
      <td>10</td>
      <td>24.390244</td>
    </tr>
    <tr>
      <th>28</th>
      <td>Staten Island</td>
      <td>C</td>
      <td>Critical</td>
      <td>3</td>
      <td>60.000000</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Staten Island</td>
      <td>C</td>
      <td>Not Critical</td>
      <td>2</td>
      <td>40.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<ul>
<li>Visualization helps us see variations in data.</li>
</ul>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a> sns.FacetGrid(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>       data <span class="op">=</span> q2c,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>       col<span class="op">=</span><span class="st">'BORO'</span>,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>       row <span class="op">=</span> <span class="st">'GRADE'</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a> .<span class="bu">map</span>(sns.scatterplot, <span class="st">'CRITICAL FLAG'</span>, <span class="st">'prop'</span> )</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7fe579dcbdf0&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="DANL210_midterm-spring-2023-a_files/figure-html/cell-21-output-2.png" width="1430" height="851"></p>
</div>
</div>
<ul>
<li><code>sns.barplot</code> would be better.</li>
</ul>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a> sns.FacetGrid(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>       data <span class="op">=</span> q2c,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>       col<span class="op">=</span><span class="st">'BORO'</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>       row <span class="op">=</span> <span class="st">'GRADE'</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a> .<span class="bu">map</span>(sns.barplot, <span class="st">'CRITICAL FLAG'</span>, <span class="st">'prop'</span> )</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/byeong-hakchoe/opt/anaconda3/lib/python3.9/site-packages/seaborn/axisgrid.py:712: UserWarning:

Using the barplot function without specifying `order` is likely to produce an incorrect plot.
</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x7fe579d9e790&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="DANL210_midterm-spring-2023-a_files/figure-html/cell-22-output-3.png" width="1429" height="851"></p>
</div>
</div>
<ul>
<li><p>For <code>GRADE</code> <code>A</code>, the probability distribution of <code>CRITICAL FLAG</code> are similar across <code>BORO</code>s.</p></li>
<li><p>For <code>GRADE</code> <code>B</code>, the restaurants in <code>Staten Island</code> are more likely to be <code>Critical</code> than in other <code>BORO</code>s.</p></li>
<li><p>For <code>GRADE</code> <code>C</code>, the restaurants in <code>Bronx</code> are more likely to be <code>Critical</code> than in other <code>BORO</code>s.</p></li>
</ul>
<p><br></p>
</section>
<section id="q2d." class="level2">
<h2 class="anchored" data-anchor-id="q2d.">Q2d.</h2>
<p>For the 10 most common <code>CUISINE DESCRIPTION</code> values, find the <code>CUISINE DESCRIPTION</code> value that has the highest proportion of <code>GRADE</code> <code>A</code>.</p>
<p><br></p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>q2d <span class="op">=</span> (</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>       restaurant</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>       .groupby(<span class="st">'CUISINE DESCRIPTION'</span>)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>       .<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.assign( n <span class="op">=</span> x.shape[<span class="dv">0</span>] ) )</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>       .reset_index(drop <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>       .query(<span class="st">'n.rank(method="dense", ascending=False) &lt;= 10'</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>       .groupby([<span class="st">'CUISINE DESCRIPTION'</span>, <span class="st">'GRADE'</span>])</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>       .size()</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>       .reset_index(name<span class="op">=</span><span class="st">'n'</span>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>       .groupby(<span class="st">'CUISINE DESCRIPTION'</span>)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>       .<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.assign( prop_A <span class="op">=</span> x[<span class="st">'n'</span>] <span class="op">/</span> x[<span class="st">'n'</span>].<span class="bu">sum</span>() ) )</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>       .query(<span class="st">'GRADE == "A"'</span>)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>       .sort_values(by <span class="op">=</span> <span class="st">'prop_A'</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>       .reset_index(drop <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>       )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="23">
<div class="cell-output cell-output-display">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>CUISINE DESCRIPTION</th>
      <th>GRADE</th>
      <th>n</th>
      <th>prop_A</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Donuts</td>
      <td>A</td>
      <td>499</td>
      <td>0.988119</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Coffee/Tea</td>
      <td>A</td>
      <td>1356</td>
      <td>0.958982</td>
    </tr>
    <tr>
      <th>2</th>
      <td>American</td>
      <td>A</td>
      <td>3505</td>
      <td>0.952964</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Italian</td>
      <td>A</td>
      <td>653</td>
      <td>0.947750</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Pizza</td>
      <td>A</td>
      <td>961</td>
      <td>0.915238</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Bakery Products/Desserts</td>
      <td>A</td>
      <td>560</td>
      <td>0.910569</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Japanese</td>
      <td>A</td>
      <td>529</td>
      <td>0.905822</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Mexican</td>
      <td>A</td>
      <td>515</td>
      <td>0.884880</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Chinese</td>
      <td>A</td>
      <td>1205</td>
      <td>0.878280</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Latin American</td>
      <td>A</td>
      <td>464</td>
      <td>0.852941</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="q2e." class="level2">
<h2 class="anchored" data-anchor-id="q2e.">Q2e.</h2>
<ul>
<li>Find the 3 most common names of restaurants (<code>DBA</code>) in each <code>BORO</code>.
<ul>
<li>If the third most common <code>DBA</code> values are multiple, please include all the <code>DBA</code> values.</li>
</ul></li>
<li>Overall, which <code>DBA</code> value is most common in NYC?</li>
</ul>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>q2e <span class="op">=</span> (</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>       restaurant[[<span class="st">'DBA'</span>, <span class="st">'BORO'</span>]]</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>       .groupby([<span class="st">'BORO'</span>, <span class="st">'DBA'</span>])</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>       .size()</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>       .reset_index(name<span class="op">=</span><span class="st">'n'</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>       )</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>q2e[<span class="st">'ranking'</span>] <span class="op">=</span> q2e.groupby([<span class="st">'BORO'</span>])[<span class="st">'n'</span>].rank(method<span class="op">=</span><span class="st">'dense'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>q2e <span class="op">=</span> (</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>       q2e</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>       .query(<span class="st">'ranking &lt;= 3'</span>)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>       .sort_values(by<span class="op">=</span>[<span class="st">'BORO'</span>, <span class="st">'ranking'</span>])</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>       .reset_index(drop <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>       .drop_duplicates()</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>       )</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>q2e_ <span class="op">=</span> (</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>       restaurant[[<span class="st">'DBA'</span>]]</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>       .groupby([<span class="st">'DBA'</span>])</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>       .value_counts()</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>       .sort_values(ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="25">
<div class="cell-output cell-output-display">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>BORO</th>
      <th>DBA</th>
      <th>n</th>
      <th>ranking</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bronx</td>
      <td>dunkin</td>
      <td>54</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Bronx</td>
      <td>mcdonald's</td>
      <td>33</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Bronx</td>
      <td>kennedy fried chicken</td>
      <td>32</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Brooklyn</td>
      <td>dunkin</td>
      <td>93</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Brooklyn</td>
      <td>mcdonald's</td>
      <td>46</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Brooklyn</td>
      <td>starbucks</td>
      <td>43</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Manhattan</td>
      <td>starbucks</td>
      <td>178</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Manhattan</td>
      <td>dunkin</td>
      <td>108</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Manhattan</td>
      <td>chipotle mexican grill</td>
      <td>52</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Manhattan</td>
      <td>subway</td>
      <td>52</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Queens</td>
      <td>dunkin</td>
      <td>113</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Queens</td>
      <td>subway</td>
      <td>50</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Queens</td>
      <td>dunkin', baskin robbins</td>
      <td>47</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Staten Island</td>
      <td>dunkin</td>
      <td>34</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Staten Island</td>
      <td>subway</td>
      <td>13</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Staten Island</td>
      <td>starbucks</td>
      <td>9</td>
      <td>3.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<div class="cell-output cell-output-display">
<pre><code>DBA
dunkin                     402
starbucks                  286
mcdonald's                 170
subway                     166
dunkin', baskin robbins    107
                          ... 
ganda sushi                  1
ganni's pizzeria             1
gantry bar &amp; kitchen         1
gaoming bakery               1
zz's pizza &amp; grill           1
Length: 13914, dtype: int64</code></pre>
</div>
</div>
<ul>
<li><p>Note that <code>chipotle mexican grill</code> and <code>subway</code> are both the third most popular franchise/chain in <code>Manhattan</code>.</p></li>
<li><p>Overall, <code>dunkin</code> is the most popular franchise/chain in NYC.</p></li>
</ul>
<p><br></p>
</section>
<section id="q2f." class="level2">
<h2 class="anchored" data-anchor-id="q2f.">Q2f.</h2>
<p>For all the <code>DBA</code> values that appear in the result of Q2f, find the <code>DBA</code> value that is most likely to commit critical violation.</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>q2f_ <span class="op">=</span> (</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>        restaurant</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>        .loc[(restaurant[<span class="st">'DBA'</span>].isin(q2e[<span class="st">'DBA'</span>])) <span class="op">&amp;</span> (restaurant[<span class="st">'CRITICAL FLAG'</span>] <span class="op">==</span> <span class="st">'Critical'</span>), [<span class="st">'DBA'</span>]]</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>        .groupby(<span class="st">'DBA'</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>        .size()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>        .reset_index(name<span class="op">=</span><span class="st">'n_crit'</span>) </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>q2f__ <span class="op">=</span> (</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>        restaurant</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>        .loc[(restaurant[<span class="st">'DBA'</span>].isin(q2e[<span class="st">'DBA'</span>])) <span class="op">&amp;</span> (restaurant[<span class="st">'CRITICAL FLAG'</span>] <span class="op">!=</span> <span class="st">'Critical'</span>), [<span class="st">'DBA'</span>]]</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>        .groupby(<span class="st">'DBA'</span>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>        .size()</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>        .reset_index(name<span class="op">=</span><span class="st">'n_not_crit'</span>) </span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>q2f__[<span class="st">'n_crit'</span>] <span class="op">=</span> q2f_[<span class="st">'n_crit'</span>]</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>q2f__[<span class="st">'prop'</span>] <span class="op">=</span> q2f__[<span class="st">'n_crit'</span>] <span class="op">/</span> (q2f__[<span class="st">'n_crit'</span>] <span class="op">+</span> q2f__[<span class="st">'n_not_crit'</span>])</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>q2f__ <span class="op">=</span> q2f__.sort_values(<span class="st">'prop'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>.shift(1)</code> can be useful:</li>
</ul>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>q2f <span class="op">=</span> (</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>       restaurant[restaurant[<span class="st">'DBA'</span>].isin(q2e[<span class="st">'DBA'</span>])]</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>           .groupby([<span class="st">'DBA'</span>, <span class="st">'CRITICAL FLAG'</span>])</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>           .size()</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>           .reset_index(name<span class="op">=</span><span class="st">'n'</span>)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>           .groupby(<span class="st">'DBA'</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>           .<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.assign(lag_n<span class="op">=</span>x[<span class="st">'n'</span>].shift(<span class="dv">1</span>),</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>                                      tot<span class="op">=</span>x[<span class="st">'n'</span>].<span class="bu">sum</span>(),</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>                                      prop_crit<span class="op">=</span>x[<span class="st">'n'</span>].shift(<span class="dv">1</span>)<span class="op">/</span>x[<span class="st">'n'</span>].<span class="bu">sum</span>()))</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>           .reset_index()</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>           .loc[:, [<span class="st">'DBA'</span>, <span class="st">'prop_crit'</span>]]</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>           .sort_values(by<span class="op">=</span><span class="st">'prop_crit'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>           .dropna(subset<span class="op">=</span>[<span class="st">'prop_crit'</span>])</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>       )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="28">
<div class="cell-output cell-output-display">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>DBA</th>
      <th>prop_crit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>13</th>
      <td>subway</td>
      <td>0.475904</td>
    </tr>
    <tr>
      <th>3</th>
      <td>dunkin</td>
      <td>0.415423</td>
    </tr>
    <tr>
      <th>5</th>
      <td>dunkin', baskin robbins</td>
      <td>0.411215</td>
    </tr>
    <tr>
      <th>7</th>
      <td>kennedy fried chicken</td>
      <td>0.403846</td>
    </tr>
    <tr>
      <th>1</th>
      <td>chipotle mexican grill</td>
      <td>0.384615</td>
    </tr>
    <tr>
      <th>9</th>
      <td>mcdonald's</td>
      <td>0.370588</td>
    </tr>
    <tr>
      <th>11</th>
      <td>starbucks</td>
      <td>0.325175</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<ul>
<li>Among popular franchises/chains, <code>subway</code> is most likely to commit <code>Critical</code> violation in NYC.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script type="text/javascript" src="links.js"></script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">powered with github, quarto, and rstudio<br>byeong-hak choe, 2023</div>
  </div>
</footer>



</body></html>