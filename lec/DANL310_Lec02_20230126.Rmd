---
title: "DANL 310 Lecture 2"
subtitle: "DANL 310: Data Visualization and Presentation"
author: "Byeong-Hak Choe"
institute: "SUNY Geneseo" 
date: "January 26, 2023"
output:
  xaringan::moon_reader:
    css: 
      - default
      - css/nhsr.css
      - css/nhsr-fonts.css
    lib_dir: libs
    seal: false
    nature:
      highlightStyle: googlecode
      highlightLines: true
      highlightLanguage: ["r"]
      countIncrementalSlides: false
      ratio: "16:9"
    includes:
      after_body: [css/insert-logo.html]
---

```{r setup, include = FALSE}
library(knitr)
library(kableExtra)
library(tidyverse)
library(NHSRtheme)
library(fontawesome)
# set default options
opts_chunk$set(echo = T, eval = F,
               fig.width = 7.252,
               fig.height = 4,
               comment = "#",
               dpi = 300)

knitr::knit_engines$set("markdown")

xaringanExtra::use_tile_view()
xaringanExtra::use_panelset()
xaringanExtra::use_clipboard()
xaringanExtra::use_webcam()
xaringanExtra::use_broadcast()
xaringanExtra::use_share_again()
xaringanExtra::style_share_again(
  share_buttons = c("twitter", "linkedin", "pocket")
)


xaringanExtra::use_extra_styles(
  hover_code_line = TRUE,         #<<
  mute_unhighlighted_code = TRUE  #<<
)

# uncomment the following lines if you want to use the NHS-R theme colours by default
# scale_fill_continuous <- partial(scale_fill_nhs, discrete = FALSE)
# scale_fill_discrete <- partial(scale_fill_nhs, discrete = TRUE)
# scale_colour_continuous <- partial(scale_colour_nhs, discrete = FALSE)
# scale_colour_discrete <- partial(scale_colour_nhs, discrete = TRUE)
```

class: title-slide, left, bottom

# `r rmarkdown::metadata$title`
----
## **`r rmarkdown::metadata$subtitle`**
### `r rmarkdown::metadata$author`
### `r rmarkdown::metadata$date`

---
class: inverse, center, middle

# Creating a Personal Website using R Markdown, Git, and GitHub
<html><div style='float:left'></div><hr color='#EB811B' size=1px width=796px></html>



---
# Creating a Personal Website
### <p style="color:#00449E"> Git </p>

- Install `git`

.pull-left[
- Mac
  - Go to [http://git-scm.com/downloads](http://git-scm.com/downloads), and download the file.
  - Run the downloaded file.
]

.pull-right[
- Windows
  - Go to [https://gitforwindows.org](https://gitforwindows.org), and download the file.
  - Run the downloaded file.
]

---
# Creating a Personal Website

Step 1.0 Create the GitHub account with your school email.

  1. Go to [GitHub](https://github.com).
  2. Click "Sign up for GitHub".
  3.  In Terminal within RStudio, run the following lines:
```{bash, echo = T, eval = F}
git config --list
git config --global user.email "YOUR_GITHUB_EMAIL_ADDRESS"
git config --global user.name "YOUR_GITHUB_USERNAME"
```


---
# Creating a Personal Website


Step 1.1 Obtain a personal access token (PAT) for GitHub. 

  1. In RStudio Console, run the followings:
```{r, echo = T, eval = F}
install.packages("usethis")
usethis::create_github_token()
```
  2. Click “Generate token” in the pop-upped web browser. 
  3. Copy the generated PAT to your clipboard.



---
# Creating a Personal Website


Step 1.2. Set the GitHub credential using the PAT. 

  1. In RStudio Console, run the followings:
```{r, echo = T, eval = F}
install.packages("gitcreds")
gitcreds::gitcreds_set()
```
  2. Paste your PAT to the RStudio Console
  
  

---
# Creating a Personal Website

Step 2.1. Login to your GitHib and make the repository.

  1. From [https://github.com](https://github.com), click the plus (+) icon in the upper right corner and select "New repository".

  2. Name this repo `YOUR_GITHUB_NAME.github.io`, which will be the domain for your website.

  3. Then, copy the web address of your GitHub repo.

  
---
# Creating a Personal Website

Step 3. Create the RStudio project with the name, `YOUR_GITHUB_NAME.github.io`:
  1. Open R Studio. Then select "New Project" under the "File" menu.
  2. Click "Version Control". Then click "Git".
  3. Paste the web address of your GitHub repo in the "Repository URL" dialogue box.
    - `https://github.com/YOUR_GITHUB_NAME/YOUR_GITHUB_NAME.github.io`
  4. Select a location of the parent folder for your personal website in your laptop, and copy its path name to "Create project as subdirectory of:"
  - Click "Create Project".

---
# Creating a Personal Website

Step 4. Update your `rmarkdown` package to make sure we actually have the version that supports R Markdown websites.

```{r, echo = T, eval = F}
install.packages("rmarkdown", type = "source")
```


Step 5. Download the template files from Byeong-Hak's GitHub repository.

- In Terminal within RStudio, run the following lines:
```{bash, echo = T, eval = F}
git clone https://github.com/bcdanl/danl-web-template.git
```


---
# Creating a Personal Website

Step 6. Arrange the files.

  1. Move all the files in the `danl-web-template` folder to the  `YOUR_GITHUB_USERNAME.github.io` folder.
  
  2. Delete (1) the file, `danl-web-template.Rproj` and (2) the empty folder, `danl-web-template`.

---
# Creating a Personal Website

Step 7. Render the site.
  1. From RStudio, open the files `index.Rmd` and `_site.yml`.
  2. Replace `YOUR_NAME` with your preferred name.
  3. Replace `https://github.com/` with `https://github.com/YOUR_GITHUB_USERNAME`.
  4. Save the files, `index.Rmd` and `_site.yml`.


Step 8. Open the R script, `render-pages.R`, and run the entire codes in it.
  - If everything goes well, you should get a bunch of output followed by the message : `Output created: SOME_FILENAME.html`.



---
# Creating a Personal Website

Step 9. Add, commit, and push the updated files to your GitHub repository.

- In Terminal within RStudio, run the following lines:
```{bash, echo = T, eval = F}
git add .
git commit -m "ANY MESSAGE"
git push -u origin main
```

Step 10. Go to your website `r emo::ji('smile')`

  1. View `index.html` in web browser.
  2. Go to `https://YOUR_GITHUB_NAME.github.io` .
  
---
# Creating a Personal Website
### <p style="color:#00449E"> Updating Your Website </p>

- *1*. Modify `index.Rmd` as follows:

  - Add the following in `index.Rmd`
```{r}
- *Name*: YOUR_NAME
- *Ocupation*: Student
- *Hobbies*: Blogging data analytics. 

Here is a super cool photo. 

![](RELATIVE_PATH_OF_YOUR_PHOTO_IN_THE_REPO_FOLDER.png){width=50%}
```

- *2.* Knit it using the shortcut (**Ctrl** (**command** for Mac user) + **Shift** + **K**)


---
# Creating a Personal Website
### <p style="color:#00449E"> Updating Your Website </p>


*3*. In Terminal within RStudio, run the following lines:
```{bash, echo = T, eval = F}
git add .
git commit -m "ANY MESSAGE"
git push -u origin main
```


*4*. Go to your website `r emo::ji('smile')`
  1. View `index.html` in web browser.
  2. Go to `https://YOUR_GITHUB_NAME.github.io` . 
  
---
class: inverse, center, middle

# Getting Started with R Markdown
<html><div style='float:left'></div><hr color='#EB811B' size=1px width=796px></html>



---
# Getting Started with R Markdown
### <p style="color:#00449E"> Installation </p>

- Install the `rmarkdown` package from the GitHub repository:
```{r}
if (!requireNamespace("devtools"))
  install.packages('devtools')
devtools::install_github('rstudio/rmarkdown')
```

- Install the `tinytex` package in R from the GitHub repository:
```{r}
install.packages('tinytex')
tinytex::install_tinytex()  # install TinyTeX
```

- TinyTeX is a lightweight, portable, cross-platform, and easy-to-maintain LaTeX distribution.

  - LaTeX is the best for writing math equations.
  
  

---
# Getting Started with R Markdown
### <p style="color:#00449E"> Basics </p>

- R Markdown provides an authoring framework for data science. 


- We can use a single R Markdown file to both
  - save and execute programming codes, and
  - generate high quality reports that can be shared with an audience.


- R Markdown was designed for easier reproducibility.
  - Both the computing code and narratives are in the same document.
  - Results are automatically generated from the source code.
  - It supports output formats, such as static/interactive HTML, PDF, and Word.
  - It supports not only R but also other programming languages, such as Python and SQL.



---
# Getting Started with R Markdown
### <p style="color:#00449E"> Workflow </p>

- Keep the PDF files of "R Markdown Reference Guide" and "R Markdown" Cheatsheet"

- Must-know shortcuts

- **option+command+I** or **Alt+Ctrl+I** : to create a R chunk
- **command+shift+return** or **Ctrl+Shift+Enter** : to run the code in the R chunk
- **command + shift + K** or **Ctrl + Shift + K**: to knit the R Markdown file
- **command + shift + C** or **Ctrl + Shift + C**: to (de-)comment out a line in the R Markdown file (**<!-- YOUR_WORDS_IN_Rmd -->** is used for commenting out `YOUR_WORDS_IN_Rmd`.)


---
# Getting Started with R Markdown
### <p style="color:#00449E"> Basics </p>

- In R Studio, we can create a new R Markdown file from the menu, File -> New File -> R Markdown.

- Open the R Markdown file, `basic_example.Rmd`, from your GitHub website local folder.

- The following syntax is YAML metadata in `basic_example.Rmd`.

```{r}
---
title: "Hello R Markdown"
author: "Awesome Me"
date: "`r format(Sys.time(), '%B %d, %Y')`"
output: html_document
---
```


---
# Getting Started with R Markdown
### <p style="color:#00449E"> YAML </p>


.left-column[
```{r, eval = T, echo = F}
knitr::include_graphics("../lec_figs/dvpi_fig2_1.png")
```

]


.right-column[
- An YAML (yet another markup language) header surrounded by `---`.
  - It is commonly used for configuration files (e.g., title, author, date, ...).
  
  
- Chunks of R code surrounded by three backticks, $\text{```}$.
]



---
# Getting Started with R Markdown
### <p style="color:#00449E"> Knitting </p>

- When we knit the document, R Markdown sends the `.Rmd` file to **knitr**, which executes all of the code chunks and creates a new markdown (`.md`) document which includes the code and its output. 

- The markdown file generated by **knitr** is then processed by **pandoc**, which is responsible for creating the output file.

```{r, eval = T, echo = F, fig.align='center', out.width='100%'}
knitr::include_graphics("../lec_figs/rmarkdownflow.png")
```




---
# Getting Started with R Markdown
### <p style="color:#00449E"> Other language engines </p>

- R Markdown supports not only R but also Python, Julia, C++, SQL, and more. 


- The support comes from the `knitr` package, which has provided a large number of language engines. 


- The support for the interaction between R and Python comes from the `reticulate` package.
  - Choose Python or interpreter from Tools -> Global Options -> Python -> Select.
  - Choose Python Interpreter from Conda Environment.


---
# Getting Started with R Markdown
### <p style="color:#00449E"> Python Interpreter in RStudio </p>

```{r, eval = T, echo = F, out.width= '80%', fig.align='center'}
knitr::include_graphics("../lec_figs/rstudio-py-setting.gif")
```


---
# Getting Started with R Markdown
### <p style="color:#00449E"> Python </p>

- Install the `reticulate` package.
```{r}
install.packages("reticulate")
```
 
- Try the following with python code with python code chunk ( $\text{```}$ `{python}` PYTHON CODES HERE $\text{```}$ )

```{python, echo = T, eval = F}
import pandas as pd
x = 'hello, python world!'
print(x.split(' '))
```


---
# Getting Started with R Markdown
### <p style="color:#00449E"> Interactive Map </p>
- `leaflet` is one of the most popular open-source JavaScript libraries for interactive maps.

```{r eval= T, echo = F, fig.align='center', out.height= '50%', out.width='95%'}
library(leaflet)
leaflet() %>% addTiles() %>%
  setView(-77.8210, 42.7953, zoom = 18) %>%
  addMarkers(-77.8210, 42.7953) %>% 
  addPopups(
    -77.8210, 42.7953, 
    'Here is the <b>School of Business</b>, SUNY Geneseo'
  )
```




---
# Getting Started with R Markdown and HTML
### <p style="color:#00449E"> Markdown, R Markdown, and HTML </p>

- The very original version of **Markdown** was invented mainly to write HTML content more easily.
  - `- SOME_TEXT` in "\*.md" is equivalent to `<ul><li> SOME_TEXT </li>` in "\*.html"
  
  
- Pandoc makes it possible to convert a Markdown document to a large variety of output formats, such as HTML.



---
# Getting Started with R Markdown and HTML
### <p style="color:#00449E"> Markdown, R Markdown, and HTML </p>

- To create an HTML document from R Markdown, we specify the `html_document` output format in the YAML metadata of our document:


- Open an empty R Markdown file.
  - Copy and paste the following YAML metadata to the empty R Markdown file.

```{r}
---
title: "Habits"
author: YOUR_NAME
date: January 26, 2023
output: 
  html_document
---
```


---
# Getting Started with R Markdown and HTML
### <p style="color:#00449E"> Table of contents </p>

- We can add a table of contents (TOC) using the `toc` option and specify the depth of headers that it applies to using the `toc_depth` option. 

.pull-left[

```{bash, echo = T, eval = F}
---
title: "Habits"
author: YOUR_NAME
date: January 26, 2023
output:
  html_document:
    toc: true
    toc_depth: 2
---
      
```

]
.pull-right[

```{bash, echo = T, eval = F}
      
# Section 1
Wake up
## Section 1.1
Drink water
## Section 1.2
Sleep again

# Section 2
Wake up
```

]


---
# Getting Started with R Markdown and HTML
### <p style="color:#00449E"> Floating TOC </p>

- We can specify the `toc_float` option to float the table of contents to the left of the main document content. 

- The floating table of contents will always be visible even when the document is scrolled. 


```{bash, echo = T, eval = F}
---
title: "Habits"
author: YOUR_NAME
date: January 26, 2023
output:
  html_document:
    toc: true
    toc_float: true
---
```


---
# Getting Started with R Markdown and HTML
### <p style="color:#00449E"> Floating TOC </p>

- We may optionally specify a list of options for the `toc_float` parameter which control its behavior. 
  - `collapsed` (defaults to TRUE) controls whether the TOC appears with only the top-level (e.g., H2) headers. 
  - If collapsed initially, the TOC is automatically expanded inline when necessary.
  - `smooth_scroll` (defaults to TRUE) controls whether page scrolls are animated when TOC items are navigated to via mouse clicks.


```{bash, echo = T, eval = F}
---
title: "Habits"
output:
  html_document:
    toc: true
    toc_float: true      
      collapsed: false
      smooth_scroll: false
---
```


---
# Getting Started with R Markdown and HTML
### <p style="color:#00449E"> Section Numbering </p>

- We can add section numbering to headers using the `number_sections` option:

```{bash, echo = T, eval = F}
---
title: "Habits"
output:
  html_document:
    toc: true
    number_sections: true
---
```

---
# Getting Started with R Markdown and HTML
### <p style="color:#00449E"> Tabbed sections </p>
- We can organize content using tabs by applying the `.tabset` class attribute to headers within a document. 
  - This will cause all sub-headers of the header with the `.tabset` attribute to appear within tabs rather than as standalone sections. 
  
```{bash}
## Quarterly Results {.tabset}

### By Product

(tab content)

### By Region

(tab content)
```
  


---
# Getting Started with R Markdown and HTML
### <p style="color:#00449E"> Tabbed sections </p>

- The `.tabset-fade` attribute causes the tabs to fade in and out when switching between tabs. 

- The `.tabset-pills` attribute causes the visual appearance of the tabs to be "pill" rather than traditional tabs.



```{bash}
## Quarterly Results {.tabset .tabset-fade .tabset-pills}
```



---
# Getting Started with R Markdown and HTML
### <p style="color:#00449E"> Appearance and Style </p>

- `theme` specifies the Bootstrap theme to use for the page (themes are drawn from the [Bootswatch](https://bootswatch.com) theme library).
  - Valid themes include `default`, `bootstrap`, `cerulean`, `cosmo`, `darkly`, `flatly`, `journal`, `lumen`, `paper`, `readable`, `sandstone`, `simplex`, `spacelab`, `united`, and `yeti`. 
  - Pass `null` for no theme (we can use the `css` file to add our own styles).
  
  
- `highlight` specifies the syntax highlighting style. 
  - Supported styles include `default`, `tango`, `pygments`, `kate`, `monochrome`, `espresso`, `zenburn`, `haddock`, `breezedark`, and `textmate`. 
  - Pass `null` to prevent syntax highlighting.



---
# Getting Started with R Markdown and HTML
### <p style="color:#00449E"> Appearance and Style </p>


```{bash}
---
title: "Habits"
output:
  html_document:
    theme: united
    highlight: tango
---
```


---
# Getting Started with R Markdown and HTML
### <p style="color:#00449E"> Custom CSS </p>
- Cascading Style Sheets (CSS) is used to format the layout of a webpage (color, font, text size, background, display, etc.). 
  - HTML will format the architecture of the house;
  - CSS will be the carpet and walls to decorate the house;
  - JavaScript adds interactive elements in the house, such as opening doors and lighting.
  
```{bash}
---
title: "Habits"
output:
  html_document:
    css: styles.css
---
```
  

---
# Getting Started with R Markdown and HTML
### <p style="color:#00449E"> Custom CSS </p>

- We can also target specific sections of documents with custom CSS by adding ids or classes to section headers within your document. 

```{bash}
## Next Steps {#nextsteps .emphasized}

```

- The following CSS would enable us to apply CSS to all of its content using either of the following CSS selectors:

```{bash}
#nextsteps {
   color: blue;
}
.emphasized {
   font-size: 1.2em;
}
```

